---
title: "report"
author: "JL"
date: "21 June 2016"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r, echo=FALSE, results="hide"}
setwd('../')
austraits <- remake::make('austraits')
id = 'dataset_002' # need to work out a way to derive this from the directory
study_data <- subset(austraits$data, study == id)
study_metadata <- subset(austraits$metadata, dataset_id == id)
```

# Report for study: `r paste0(id, study_metadata$data_description, sep = ": ")`

## Contact Information

**Data contributor:** `r study_metadata$data_contributor`

**Email:** `r paste0('')`

## Data source

**Primary source:** `r study_metadata$primary_source`

## Overview of data provided

The dataset contains `r nrow(study_data)` individual datapoints across `r length(unique(study_data$species_name))` taxa, with data included for the following variables:
  
  ```{r summary_table, results='asis', echo=FALSE}
  summary_table <- function(df) {
  
  require(plyr)
  ddply(df, .(trait_name), summarise, 
        units = paste0(unique(unit)), 
        N.records = length(value), 
        N.species = length(unique(species_name))
        )

  }
tab <- summary_table(study_data)
kable(tab[names(tab) != "Studies"], "markdown", align="l", padding=10)
```

## Diagnostic plots 

```{r, echo=FALSE}
all <- format_data(id)
pairwise_panel(id)
dotcharts(id)

```

# Pairwise diagnostic

```{r pairwise_diagnostic, fig.height=12, fig.width=12, echo=FALSE}
all <- format_data(id)
pairwise_panel(id)
dotcharts(id)

```

# Location of datapoints in current study within AUSTRAITS 

```{r dotchart, fig.height=12, fig.width=12, echo=FALSE}
all <- format_data(id)
pairwise_panel(id)
dotcharts(id)

```
