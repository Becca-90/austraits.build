source:
  primary:
    key: Barlow_1981
    bibtype: Misc
    author: B. A. Barlow, H. T. Clifford, A. S. George, A. Kanis A. McCusker
    year: 1981
    title: Flora of Australia (online)
    publisher: AGPS
    url: http://www.environment.gov.au/biodiversity/abrs/online-resources/flora/main/
people:
- name: Rachael Gallagher
  institution: Macquarie University Sydney
  role: collector
- name: Rachael Gallagher
  institution: Macquarie University Sydney
  role: contributor
dataset:
  year_collected_start: 2015
  year_collected_end: 2015
  description: Flora of Australian online checked via trait corrections
  collection_type: herbarium specimens
  sample_age_class: adult_assumed
  sampling_strategy: unknown
  original_file: STU
  notes: .na
config:
  is_vertical: yes
  variable_match:
    species_name: species_name
    trait_name: trait
    unit: units
    value: value
  custom_R_code: '
    traits <- c("leaf length maximum", "leaf length minimum", "leaf width maximum", "leaf width minimum",
            "plant height maximum", "plant height minimum", "seed breadth maximum", "seed breadth minimum",
            "seed length maximum", "seed length minimum", "seed width maximum", "seed width minimum");
   a <- list(cm=10, m=1000);
    for(t in traits){
      for(v in names(a)) {
        i <- which(data[["trait"]]==t & data[["units"]] == v);
        data[["value"]][i] <- as.character(as.numeric(data[["value"]][i]) * a[[v]]);
        data[["units"]][i] <- "mm";
        };
      };

    i <- data$trait == "flowering time start";
    data[i, "value"] <- format_flowering_months(data[i,]$value, data[data$trait == "flowering time end",]$value);
    data[i, "trait"] <- "flowering_time";
    data <- data[!data$trait == "flowering time end",];

    leaf_phenology <- data[data$trait == "longevity",];
    life_history <- data[data$trait == "longevity",];
    leaf_phenology[leaf_phenology$trait == "longevity",]$trait <- "leaf_phenology";
    leaf_phenology[leaf_phenology$trait == "leaf_phenology" & leaf_phenology$value %in% c("EP", "E", "EAP", "EPB", "EB", "EAB", "EA"),]$value <- "evergreen";
    leaf_phenology[leaf_phenology$trait == "leaf_phenology" & leaf_phenology$value %in% c("DP", "D", "DPB"),]$value <- "deciduous";
    leaf_phenology[leaf_phenology$trait == "leaf_phenology" & leaf_phenology$value %in% c("P", "A", "ED", "EDP", "AP", "AB", "PB", "B"),]$value <- NA;
    leaf_phenology <- leaf_phenology[!is.na(leaf_phenology$value),];

    life_history[life_history$trait == "longevity",]$trait <- "life_history";
    life_history[life_history$trait == "life_history" & life_history$value %in% c("EP", "P", "DP", "EDP"),]$value <- "perennial";
    life_history[life_history$trait == "life_history" & life_history$value %in% c("A", "EA"),]$value <- "annual";
    life_history[life_history$trait == "life_history" & life_history$value %in% c("EB", "B"),]$value <- "biennial";
    life_history[life_history$trait == "life_history" & life_history$value %in% c("AB", "EAB"),]$value <- "annual biennial";
    life_history[life_history$trait == "life_history" & life_history$value %in% c("AP", "EAP"),]$value <- "annual perennial";
    life_history[life_history$trait == "life_history" & life_history$value %in% c("EPB", "DPB", "PB"),]$value <- "biennial perennial";
    life_history[life_history$trait %in% "life_history" & life_history$value %in% c("D", "E", "ED"),]$value <- NA;
    life_history <- life_history[!is.na(life_history$value),];

    data <- rbind(data[!data$trait %in% "longevity",], leaf_phenology, life_history);
    data[data$value %in% "articles",]$value <- c("article");
    data[data$value %in% "article",]$trait <- c("leaf_type");
    data'
traits:
- var_in: dispersal
  unit_in: .na
  trait_name: dispersal_syndrome
  value_type: unknown
  replicates: unknown
  precision: unknown
  methodology_ids: unknown
- var_in: lifeform
  unit_in: .na
  trait_name: plant_growth_form
  value_type: unknown
  replicates: unknown
  precision: unknown
  methodology_ids: unknown
- var_in: longevity
  unit_in: .na
  trait_name: leaf_phenology
  value_type: unknown
  replicates: unknown
  precision: unknown
  methodology_ids: unknown
- var_in: leaf type
  unit_in: .na
  trait_name: leaf_compoundness
  value_type: unknown
  replicates: unknown
  precision: unknown
  methodology_ids: unknown
- var_in: seed shape
  unit_in: .na
  trait_name: seed_shape
  value_type: unknown
  replicates: unknown
  precision: unknown
  methodology_ids: unknown
- var_in: flowering_time
  unit_in: .na
  trait_name: flowering_time
  value_type: unknown
  replicates: unknown
  precision: unknown
  methodology_ids: unknown
- var_in: leaf length minimum
  unit_in: mm
  trait_name: leaf_length
  value_type: min
  replicates: unknown
  precision: unknown
  methodology_ids: unknown
- var_in: leaf length maximum
  unit_in: mm
  trait_name: leaf_length
  value_type: max
  replicates: unknown
  precision: unknown
  methodology_ids: unknown
- var_in: leaf width minimum
  unit_in: mm
  trait_name: leaf_width
  value_type: min
  replicates: unknown
  precision: unknown
  methodology_ids: unknown
- var_in: leaf width maximum
  unit_in: mm
  trait_name: leaf_width
  value_type: max
  replicates: unknown
  precision: unknown
  methodology_ids: unknown
- var_in: plant height minimum
  unit_in: mm
  trait_name: plant_height
  value_type: min
  replicates: unknown
  precision: unknown
  methodology_ids: unknown
- var_in: plant height maximum
  unit_in: mm
  trait_name: plant_height
  value_type: max
  replicates: unknown
  precision: unknown
  methodology_ids: unknown
- var_in: seed length minimum
  unit_in: mm
  trait_name: seed_length
  value_type: min
  replicates: unknown
  precision: unknown
  methodology_ids: unknown
- var_in: seed length maximum
  unit_in: mm
  trait_name: seed_length
  value_type: max
  replicates: unknown
  precision: unknown
  methodology_ids: unknown
- var_in: seed width minimum
  unit_in: mm
  trait_name: seed_width
  value_type: min
  replicates: unknown
  precision: unknown
  methodology_ids: unknown
- var_in: seed width maximum
  unit_in: mm
  trait_name: seed_width
  value_type: max
  replicates: unknown
  precision: unknown
  methodology_ids: unknown
- var_in: seed breadth minimum
  unit_in: mm
  trait_name: seed_breadth
  value_type: min
  replicates: unknown
  precision: unknown
  methodology_ids: unknown
- var_in: seed breadth maximum
  unit_in: mm
  trait_name: seed_breadth
  value_type: max
  replicates: unknown
  precision: unknown
  methodology_ids: unknown
# Note variables below are created via custom_R_code
- var_in: leaf_type
  unit_in: .na
  trait_name: leaf_type
  value_type: .na
  replicates: unknown
  precision: unknown
  methodology_ids: unknown
- var_in: leaf_phenology
  unit_in: .na
  trait_name: leaf_phenology
  value_type: .na
  replicates: unknown
  precision: unknown
  methodology_ids: unknown
- var_in: life_history
  unit_in: .na
  trait_name: life_history
  value_type: .na
  replicates: unknown
  precision: unknown
  methodology_ids: unknown
substitutions:
- trait_name: plant_growth_form
  find: V
  replace: climber
- trait_name: plant_growth_form
  find: T
  replace: tree
- trait_name: plant_growth_form
  find: TS
  replace: shrub tree
- trait_name: plant_growth_form
  find: H
  replace: herb
- trait_name: plant_growth_form
  find: S
  replace: shrub
- trait_name: plant_growth_form
  find: TV
  replace: climber
- trait_name: plant_growth_form
  find: SC
  replace: climber
- trait_name: plant_growth_form
  find: L
  replace: climber
- trait_name: plant_growth_form
  find: SV
  replace: climber
- trait_name: plant_growth_form
  find: TH
  replace: tree
- trait_name: plant_growth_form
  find: HL
  replace: climber
- trait_name: plant_growth_form
  find: CV
  replace: climber
- trait_name: plant_growth_form
  find: SE
  replace: graminoid
- trait_name: plant_growth_form
  find: C
  replace: climber
- trait_name: plant_growth_form
  find: SL
  replace: climber
- trait_name: plant_growth_form
  find: TSC
  replace: climber
- trait_name: plant_growth_form
  find: SU
  replace: .na
- trait_name: plant_growth_form
  find: SH
  replace: .na
- trait_name: plant_growth_form
  find: U
  replace: subshrub
- trait_name: plant_growth_form
  find: VL
  replace: climber
- trait_name: plant_growth_form
  find: CP
  replace: .na
- trait_name: plant_growth_form
  find: SUH
  replace: .na
- trait_name: plant_growth_form
  find: A
  replace: aquatic
- trait_name: plant_growth_form
  find: TSV
  replace: .na
- trait_name: plant_growth_form
  find: HA
  replace: aquatic
- trait_name: plant_growth_form
  find: HV
  replace: climber
- trait_name: plant_growth_form
  find: E
  replace: graminoid
- trait_name: plant_growth_form
  find: HE
  replace: graminoid
- trait_name: seed_shape
  find: 'NULL'
  replace: .na

